// –ñ–¥–µ–º, –ø–æ–∫–∞ –≤–µ—Å—å HTML-–¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
document.addEventListener('DOMContentLoaded', () => {

    // 1. –ü–æ–ª—É—á–∞–µ–º –æ–±—ä–µ–∫—Ç Telegram Web App
    const tg = window.Telegram.WebApp;

    // 2. –ì–æ–≤–æ—Ä–∏–º Telegram, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ
    tg.ready();

    // 3. –ü–æ–ª—É—á–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    const appContainer = document.getElementById('app-container');

    // 4. –ù–∞—à–∏ –¥–∞–Ω–Ω—ã–µ (–ø—Ä–∞–π—Å-–ª–∏—Å—Ç)
    // (–Ø –≤–∑—è–ª —É—Ä–µ–∑–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞)
    const priceList = {
        "categories": [
            { "id": "electro", "title": "–≠–ª–µ–∫—Ç—Ä–∏–∫–∞", "icon": "‚ö°Ô∏è" },
            { "id": "plumbing", "title": "–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞", "icon": "üîß" },
            { "id": "assembly", "title": "–°–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ–±–µ–ª–∏", "icon": "ü™ö" }
            // ... (–¥–æ–±–∞–≤—å—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
        ],
        "services": {
            "electro": [
                { "id": "e1", "title": "–ó–∞–º–µ–Ω–∞ —Ä–æ–∑–µ—Ç–∫–∏ / –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è", "price": 1000 },
                { "id": "e2", "title": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª—é—Å—Ç—Ä—ã", "price": 3000 }
            ],
            "plumbing": [
                { "id": "p1", "title": "–ó–∞–º–µ–Ω–∞ —Å–º–µ—Å–∏—Ç–µ–ª—è", "price": 2500 },
                { "id": "p2", "title": "–ó–∞–º–µ–Ω–∞ —É–Ω–∏—Ç–∞–∑–∞", "price": 3500 },
                { "id": "p3", "title": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∏—Ä–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã", "price": 2000 }
            ],
            "assembly": [
                { "id": "a1", "title": "–°–±–æ—Ä–∫–∞ —à–∫–∞—Ñ–∞", "price": 5000 },
                { "id": "a2", "title": "–°–±–æ—Ä–∫–∞ –∫—Ä–æ–≤–∞—Ç–∏", "price": 3000 }
            ]
        }
    };

    // 5. –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ (–∫–∞—Ç–µ–≥–æ—Ä–∏–π)
    function showMainScreen() {
        appContainer.innerHTML = '<h2>–ö–∞–∫–∞—è –ø–æ–º–æ—â—å –≤–∞–º –Ω—É–∂–Ω–∞?</h2>';
        
        priceList.categories.forEach(category => {
            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            const button = document.createElement('button');
            button.className = 'category-button';
            button.innerHTML = `<span>${category.icon}</span> ${category.title}`;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ (–ø–æ–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–¥–µ–ª–∞–µ–º –≤ —Å–ª–µ–¥. —à–∞–≥–µ)
            button.onclick = () => {
                // alert(`–í—ã –≤—ã–±—Ä–∞–ª–∏: ${category.title}`); 
                // –í —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ –º—ã –±—É–¥–µ–º –∑–¥–µ—Å—å –≤—ã–∑—ã–≤–∞—Ç—å showServicesScreen(category.id)
            };
            
            appContainer.appendChild(button);
        });
    }

    // 6. –ó–∞–ø—É—Å–∫–∞–µ–º! –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    showMainScreen();

});
